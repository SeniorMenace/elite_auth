spring.application.name=eliteback

# Server – Railway sets PORT; default 8080 for local
server.port=${PORT:8080}

# Base URL for Swagger / OpenAPI – use HTTPS so Swagger UI does not generate http:// requests
# Set in Railway: APP_BASE_URL=https://eliteauth-production.up.railway.app
app.base-url=${APP_BASE_URL:https://eliteauth-production.up.railway.app}

# Forwarded headers (Railway/Proxy) so Spring sees correct scheme/host
server.forward-headers-strategy=framework

# PostgreSQL – Railway provides PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD
spring.datasource.url=jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:eliteback}?sslmode=${PGSSLMODE:disable}
spring.datasource.username=${PGUSER:postgres}
spring.datasource.password=${PGPASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false

# Redis – Railway provides REDIS_URL; local default
spring.data.redis.url=${REDIS_URL:redis://localhost:6379}
spring.data.redis.timeout=60000

# JWT – set JWT_SECRET in production (min 32 chars)
app.jwt.secret=${JWT_SECRET:your-256-bit-secret-key-for-signing-must-be-at-least-32-chars}
app.jwt.access-expiration-ms=900000
app.jwt.refresh-expiration-ms=604800000
app.jwt.onboarding-expiration-ms=1800000

# OTP
app.otp.ttl-minutes=10
app.otp.length=6

# File upload – Railway filesystem is ephemeral; use tmp or add object storage later
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
app.upload.dir=${java.io.tmpdir}/eliteback-uploads
app.upload.allowed-types=image/jpeg,image/png,image/webp
app.upload.max-size-bytes=5242880

# Stripe – set in Railway
stripe.api.key=${STRIPE_SECRET_KEY:}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET:}
stripe.price.id=${STRIPE_PRICE_ID:}

# Mail (OTP) – set in Railway
spring.mail.host=${MAIL_HOST:smtp.example.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Actuator
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true
